{"ast":null,"code":"import firebase from \"./firebase.js\"; //require('firebase/<PACKAGE>');\n//import { database } from \"firebase\";\n\nvar db = firebase.firestore();\nvar messaging = firebase.messaging();\nmessaging.requestPermission().then(function () {\n  //have permission\n  return messaging.getToken();\n}).then(function (token) {//we have token\n}).catch(function (error) {\n  // Handle Errors here.\n  var errorCode = error.code;\n  var errorMessage = error.message; // ...\n\n  alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\n});\nfirebase.auth().onAuthStateChanged(function (USER) {\n  var user = USER; //console.log(user);\n\n  if (user) {// User is signed in.\n  } else {// No user is signed in.\n    }\n});\nexport function GetUser() {\n  var user = firebase.auth().currentUser;\n  return user;\n}\nexport function GetUserData(currentComponent) {\n  var user = firebase.auth().currentUser;\n\n  if (user) {\n    var docRef = db.collection(\"users\").doc(user.uid);\n    docRef.get().then(function (doc) {\n      if (doc && doc.exists) {\n        //console.log(doc);\n        var data = doc.data(); //console.log(data);\n\n        currentComponent.setState({\n          User: user,\n          User_Loaded: true,\n          User_Firstname: data.User_Firstname,\n          User_Lastname: data.User_Lastname,\n          User_Email: data.User_Email,\n          User_Friends: data.User_Friends\n        });\n      }\n    }).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message; // ...\n\n      alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\n    });\n  } else {\n    currentComponent.setState({\n      User: null,\n      User_Loaded: false,\n      User_Firstname: \"\",\n      User_Lastname: \"\",\n      User_Email: \"\",\n      User_Friends: \"\"\n    });\n  }\n}\nexport function CreateUser(firstname, lastname, email, password, props) {\n  firebase.auth().createUserWithEmailAndPassword(email, password).then(function (cred) {\n    return db.collection(\"users\").doc(cred.user.uid).set({\n      User_Firstname: firstname,\n      User_Lastname: lastname,\n      User_Email: email,\n      User_Friends: []\n    });\n  }).then(function () {\n    //create user successful\n    alert(\"Created User\");\n    props.history.push(\"/userpage\");\n  }).catch(function (error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message; // ...\n\n    alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\n  });\n}\nexport function Login(email, password, props) {\n  firebase.auth().signInWithEmailAndPassword(email, password).then(function () {\n    //sign in successful\n    alert(\"Logged In\");\n    props.history.push(\"/userpage\");\n  }).catch(function (error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message; // ...\n\n    alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\n  });\n}\nexport function Logout(props) {\n  firebase.auth().signOut().then(function () {\n    // Sign-out successful.\n    alert(\"Logged Out\");\n    props.history.push(\"/login\");\n  }).catch(function (error) {\n    // An error happened.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\n  });\n}","map":{"version":3,"sources":["D:\\Documents\\CS 180 Software Engineering\\DJ-IRS\\src\\UserFunctions.js"],"names":["firebase","db","firestore","messaging","requestPermission","then","getToken","token","catch","error","errorCode","code","errorMessage","message","alert","auth","onAuthStateChanged","USER","user","GetUser","currentUser","GetUserData","currentComponent","docRef","collection","doc","uid","get","exists","data","setState","User","User_Loaded","User_Firstname","User_Lastname","User_Email","User_Friends","CreateUser","firstname","lastname","email","password","props","createUserWithEmailAndPassword","cred","set","history","push","Login","signInWithEmailAndPassword","Logout","signOut"],"mappings":"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","sourcesContent":["import firebase from \"./firebase.js\";\r\n//require('firebase/<PACKAGE>');\r\n//import { database } from \"firebase\";\r\n\r\nvar db = firebase.firestore();\r\nconst messaging = firebase.messaging();\r\n\r\n\r\nmessaging.requestPermission().then(function() {\r\n  //have permission\r\n  return messaging.getToken();\r\n}).then(function(token) {\r\n  //we have token\r\n  \r\n}).catch(function(error) {\r\n  // Handle Errors here.\r\n  var errorCode = error.code;\r\n  var errorMessage = error.message;\r\n  // ...\r\n\r\n  alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\r\n})\r\n\r\nfirebase.auth().onAuthStateChanged(function(USER) {\r\n  var user = USER;\r\n    //console.log(user);\r\n\r\n    if (user) {\r\n      // User is signed in.\r\n        \r\n\r\n    } else {\r\n      // No user is signed in.\r\n    }\r\n});\r\n\r\nexport function GetUser() {\r\n  var user = firebase.auth().currentUser;\r\n  return user;\r\n}\r\n\r\nexport function GetUserData(currentComponent) {\r\n  var user = firebase.auth().currentUser;\r\n\r\n    if(user) {\r\n      var docRef = db.collection(\"users\").doc(user.uid);\r\n      docRef.get().then( function(doc) {\r\n        if(doc && doc.exists) {\r\n          //console.log(doc);\r\n          const data = doc.data();\r\n          //console.log(data);\r\n          currentComponent.setState( {\r\n            User: user,\r\n            User_Loaded: true,\r\n            User_Firstname: data.User_Firstname,\r\n            User_Lastname: data.User_Lastname,\r\n            User_Email: data.User_Email,\r\n            User_Friends: data.User_Friends,\r\n          });\r\n        }\r\n      }).catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n\r\n        alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\r\n      });\r\n      \r\n    }else {\r\n      currentComponent.setState( {\r\n        User: null,\r\n        User_Loaded: false,\r\n        User_Firstname: \"\",\r\n        User_Lastname: \"\",\r\n        User_Email: \"\",\r\n        User_Friends: \"\",\r\n      });\r\n    }\r\n    \r\n\r\n}\r\n\r\nexport function CreateUser(firstname, lastname, email, password, props) {\r\n        firebase.auth().createUserWithEmailAndPassword(email, password).then(cred => {\r\n          return db.collection(\"users\").doc(cred.user.uid).set({\r\n            User_Firstname: firstname,\r\n            User_Lastname: lastname,\r\n            User_Email: email,\r\n            User_Friends: [],\r\n          });\r\n          \r\n        }).then( function() {\r\n            //create user successful\r\n            alert(\"Created User\");\r\n            props.history.push(\"/userpage\");\r\n        }).catch(function(error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // ...\r\n\r\n            alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\r\n\r\n          });\r\n}\r\n\r\nexport function Login(email, password, props) {\r\n    firebase.auth().signInWithEmailAndPassword(email, password).then(function() {\r\n      //sign in successful\r\n      alert(\"Logged In\");\r\n      props.history.push(\"/userpage\");\r\n      \r\n    }).catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // ...\r\n\r\n        alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\r\n      });\r\n      \r\n}\r\n\r\n\r\nexport function Logout(props) {\r\n    \r\n      firebase.auth().signOut().then(function() {\r\n        // Sign-out successful.\r\n        alert(\"Logged Out\");\r\n        props.history.push(\"/login\");\r\n        \r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        alert(\"Error Code: \" + errorCode + \"\\n\" + errorMessage);\r\n      });\r\n      \r\n      \r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}